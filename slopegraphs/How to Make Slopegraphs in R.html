<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0063)http://flowingdata.com/2013/06/03/how-to-make-slopegraphs-in-r/ -->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head profile="http://gmpg.org/xfn/11"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<title> How to Make Slopegraphs in R</title>
<meta name="generator" content="WordPress 3.8">  
<link rel="stylesheet" href="./How to Make Slopegraphs in R_files/style.css" type="text/css" media="screen">
<link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="http://flowingdata.com/feed">
<link rel="pingback" href="http://flowingdata.com/xmlrpc.php">
<link rel="shortcut icon" href="http://flowingdata.com/wp-content/themes/flowingdata-4-8/images/favicon.ico">
<script src="./How to Make Slopegraphs in R_files/quant.js" async="" type="text/javascript"></script><script async="" type="text/javascript" src="http://www.googletagservices.com/tag/js/gpt.js"></script><script type="text/javascript" src="./How to Make Slopegraphs in R_files/jquery-1.4.4.min.js"></script>
<script type="text/javascript">
    var googletag = googletag || {};
    googletag.cmd = googletag.cmd || [];
    (function() {
    var gads = document.createElement('script');
    gads.async = true;
    gads.type = 'text/javascript';
    var useSSL = 'https:' == document.location.protocol;
    gads.src = (useSSL ? 'https:' : 'http:') + 
    '//www.googletagservices.com/tag/js/gpt.js';
    var node = document.getElementsByTagName('script')[0];
    node.parentNode.insertBefore(gads, node);
    })();
    </script>
<script type="text/javascript">
    googletag.cmd.push(function() {
    googletag.defineSlot('/2462688/Sidebar_rectangle', [300, 250], 'div-gpt-ad-1332011316310-2').addService(googletag.pubads());
    googletag.defineSlot('/2462688/Square1', [125, 125], 'div-gpt-ad-1332011316310-3').addService(googletag.pubads());
    googletag.defineSlot('/2462688/Square2', [125, 125], 'div-gpt-ad-1332011316310-4').addService(googletag.pubads());
    googletag.defineSlot('/2462688/Square3', [125, 125], 'div-gpt-ad-1332011316310-5').addService(googletag.pubads());
    googletag.defineSlot('/2462688/Square4', [125, 125], 'div-gpt-ad-1358209090048-5').addService(googletag.pubads());
googletag.defineSlot('/2462688/Bottom_Post', [300, 250], 'div-gpt-ad-1332011316310-0').addService(googletag.pubads());    googletag.pubads().enableSingleRequest();
    googletag.pubads().collapseEmptyDivs();
    googletag.enableServices();
    });
    </script>
<script type="text/javascript" src="./How to Make Slopegraphs in R_files/comment-reply.min.js"></script>
<script type="text/javascript" src="./How to Make Slopegraphs in R_files/jquery.js"></script>
<script type="text/javascript" src="./How to Make Slopegraphs in R_files/jquery-migrate.min.js"></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://flowingdata.com/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://flowingdata.com/wp-includes/wlwmanifest.xml">
<link rel="prev" title="Central limit theorem animation" href="http://flowingdata.com/2013/06/03/central-limit-theorem-animation/">
<link rel="next" title="Visualising data with ggplot2" href="http://flowingdata.com/2013/06/03/visualising-data-with-ggplot2/">
<meta name="generator" content="WordPress 3.8">
<link rel="canonical" href="./How to Make Slopegraphs in R_files/How to Make Slopegraphs in R.html">
<link rel="shortlink" href="http://flowingdata.com/?p=30678">
 <script type="text/javascript" src="./How to Make Slopegraphs in R_files/democracy.js"></script><link rel="stylesheet" href="./How to Make Slopegraphs in R_files/basic.css" type="text/css"><link rel="stylesheet" href="./How to Make Slopegraphs in R_files/style(1).css" type="text/css"><link rel="stylesheet" href="./How to Make Slopegraphs in R_files/wp-page-numbers.css" type="text/css" media="screen"><style type="text/css">img#wpstats{display:none}</style><link rel="stylesheet" type="text/css" href="./How to Make Slopegraphs in R_files/shCore.css"><link rel="stylesheet" type="text/css" href="./How to Make Slopegraphs in R_files/shThemeDefault.css"><style type="text/css" id="syntaxhighlighteranchor"></style>
<style>#juhuruekymmloxspqfrpqlvldqjjorktqggmnizfr{border:solid 2px #fff !important;box-sizing:content-box !important;color:#fff !important;display:block !important;height:auto !important;margin:0 !important;opacity:0.9 !important;padding:7px 10px !important;position:fixed !important;visibility:visible !important;width:auto !important;z-index:2147483647 !important;-webkit-border-radius:5px !important;-webkit-box-shadow:0px 0px 20px #000 !important;-webkit-box-sizing:content-box !important;}.juhuruekymmloxspqfrpqlvldqjjorktqggmnizfr-blocked{color:#777 !important;display:inline !important;text-decoration:line-through !important;}#juhuruekymmloxspqfrpqlvldqjjorktqggmnizfr br{display:block !important;}#juhuruekymmloxspqfrpqlvldqjjorktqggmnizfr span{background:transparent !important;}#juhuruekymmloxspqfrpqlvldqjjorktqggmnizfr div{border:0 !important;margin:0 !important;padding:0 !important;width:auto !important;letter-spacing:normal !important;font:13px Arial,Helvetica !important;text-align:left !important;text-shadow:none !important;text-transform:none !important;word-spacing:normal !important;}#juhuruekymmloxspqfrpqlvldqjjorktqggmnizfr a{font-weight:normal !important;background:none !important;text-decoration:underline !important;color:#fff !important;}@media print{#juhuruekymmloxspqfrpqlvldqjjorktqggmnizfr{display:none !important;}}</style></head><style type="text/css">embed[type*="application/x-shockwave-flash"],embed[src*=".swf"],object[type*="application/x-shockwave-flash"],object[codetype*="application/x-shockwave-flash"],object[src*=".swf"],object[codebase*="swflash.cab"],object[classid*="D27CDB6E-AE6D-11cf-96B8-444553540000"],object[classid*="d27cdb6e-ae6d-11cf-96b8-444553540000"],object[classid*="D27CDB6E-AE6D-11cf-96B8-444553540000"]{	display: none !important;}</style>
<body style="">
<a name="top"></a>
<div id="topnav">
<div id="topnav-content" class="content">
<div id="login" class="float-right">
<span id="username-meta">Logged in as <a href="http://flowingdata.com/profile/">abresler</a> &nbsp;&nbsp;</span>
<a href="http://flowingdata.com/wp-login.php?action=logout&_wpnonce=d018091d15">Log out</a> </div>
</div>
<div class="clear-line"></div>
</div> 
<div id="header">
<div id="header-content" class="content">
<div id="nav">
<a href="http://flowingdata.com/">
<img src="./How to Make Slopegraphs in R_files/logo.png" class="float-left" scale="0">
</a>
<div id="pages" class="float-right">
<ul>
<li><a href="http://flowingdata.com/membership/">Membership</a></li>
<li><a href="http://flowingdata.com/learning/">Learning</a></li>
<li><a href="https://jobs.flowingdata.com/">Job Board</a></li>
<li><a href="http://flowingdata.com/category/projects/">Projects</a></li>
<li><a href="http://flowingdata.com/about/">About</a></li>
</ul>
</div> 
<div class="clear-line"></div>
</div> 
</div> 
</div> 
<div class="clear-line"></div>
<div id="main-wrapper">
<div id="content-wrapper" class="content">
<div class="post" id="post-30678">
<div id="content" class="single-long">
<div class="entry">
<div class="category">
<a href="http://flowingdata.com/category/tutorials/" title="View all posts in Tutorials" rel="category tag">Tutorials</a> &nbsp;/&nbsp; <a href="http://flowingdata.com/tag/r/" rel="tag">R</a>, <a href="http://flowingdata.com/tag/slopegraph/" rel="tag">slopegraph</a> <span class="members-note"><a href="http://flowingdata.com/members-only">Members Only</a></span> </div>
<h1>How to Make Slopegraphs in R</h1>
<div class="clear-line"></div>
<div class="author">
By <strong>Nathan Yau</strong>
</div> 
<div id="lead-in">
<p class="img-right"><img src="./How to Make Slopegraphs in R_files/slopegraph-featured.png" class="attachment-long-form-thumb wp-post-image" alt="How to make a slopegraph" width="425" height="301" src-orig="http://i1.wp.com/flowingdata.com/wp-content/uploads/2013/05/slopegraph-featured.png?fit=425%2C9999" scale="2"></p>
<div class="entry-excerpt">
Also known as specialized or custom line charts. Figure out how to draw lines with the right spacing and pointed in the right direction, and you've got your slopegraphs. </div>
<div id="tut-meta">
<div class="button-link"><a href="http://flowingdata.com/?attachment_id=30681">Demo</a></div>
<div class="button-link"><a href="http://flowingdata.com/?s2member_file_download=2013/201306slopegraph-tutorial.zip">Download Source</a></div>
<div class="clear-line"></div>
</div> 
<div class="clear-line"></div>
</div> 
<div class="entry-content">
<p>The slopegraph was quickly introduced by Edward Tufte in <em>The Visual Display of Quantitative Information</em> as a simple way to see changes between two periods of time, across multiple categories. Although he never calls it that. Instead, he references it as a "table-graphic." The graphic in the book is shown below, which represents government receipts as a percentage of Gross Domestic Product from 1970 to 1979.</p>
<p><span class="tip">Tufte <a href="http://www.edwardtufte.com/bboard/q-and-a-fetch-msg?msg_id=0003nk">explains a little more</a> on his site.</span><img src="./How to Make Slopegraphs in R_files/Tufte-example-625x826.gif" alt="Tufte example" class="alignnone size-medium wp-image-30756" width="625" height="826" src-orig="http://i0.wp.com/flowingdata.com/wp-content/uploads/2013/05/Tufte-example-625x826.gif?resize=625%2C826" scale="2"></p>
<p>It looks like a standard time series chart (or line chart) at first glance. There's two points in time, and each line represents a country, so slopegraphs and a time series look almost geometrically the same. However, look at Belgium and Canada on the left and towards the middle. They both start at 35.2% in 1970, but Belgium is placed above Canada. The two countries would overlap if this were a line chart. Precedence goes to slope.</p>
<p>This is more obvious in the second example that Tufte <a href="http://www.edwardtufte.com/bboard/q-and-a-fetch-msg?msg_id=0003nk">provides online</a> (but not in the book), which shows observations for multiple time points. For example, the 20-year point for breast cancer, 65% is above Hodgkin's Disease, which is 67%.</p>
<p><span class="tip">Data points are sorted initially at the 5-year mark, but the same order is maintained throughout as you read horizontally.</span><img src="./How to Make Slopegraphs in R_files/Tufte-multiple.gif" alt="Tufte-multiple" class="alignnone size-full wp-image-30761" width="500" height="1071" src-orig="http://i1.wp.com/flowingdata.com/wp-content/uploads/2013/06/Tufte-multiple.gif?resize=500%2C1071" scale="2"></p>
<p><span class="tip">I suspect the slopegraphs that Tufte uses as examples were edited manually, because in practice, there's going to be a lot more overlapping points.</span>So the slopegraph is slightly different than a line chart. The focus is on the rate of change rather than relative positions on the vertical value scale. For most people, slope is probably harder to understand than say, values in <a href="http://flowingdata.com/2013/04/29/small-multiples-in-r/">small multiples</a>, which is probably why the chart type never really caught on. That in addition to only a couple of pages were devoted to the chart in Tufte's book.</p>
<p>The example didn't get much attention over the past couple of decades. However, a few years ago Ben Fry used a variation of the chart type (coming to the result independently I'm guessing) when he <a href="http://fathom.info/salaryper/">compared baseball records to total salary paid</a>.</p>
<p><a href="http://fathom.info/salaryper/"><img src="./How to Make Slopegraphs in R_files/Ben-Fry-baseball-slopegraph.png" alt="Ben Fry baseball slopegraph" class="alignright size-medium wp-image-30758" width="625" height="477" src-orig="http://i0.wp.com/flowingdata.com/wp-content/uploads/2013/05/Ben-Fry-baseball-slopegraph.png?resize=625%2C477" scale="2"></a></p>
<p>There was another bump in popularity in 2011 when Charlie Park <a href="http://charliepark.org/slopegraphs/">wrote a summary</a> with a variety of examples.</p>
<p>In any case, you most likely won't use slopegraphs on an everyday basis, but I've found it useful occasionally. Let's get into how to make these things in R. You'll reproduce the GDP graphic shown above.</p>
<h2>Setup</h2>
<p>Naturally, you need R installed to make graphics in R. Download and install it so you can follow along. It's free and a one-click install on major operating systems. <a href="http://www.r-project.org/">Go to the R homepage</a>, click the "CRAN" link on the left, select a mirror near you, and then download the version that matches your system (i.e. Windows or OS X).</p>
<p>Got R installed? Start it up, and you should see a console window that looks like the one below.</p>
<p><img src="./How to Make Slopegraphs in R_files/R-console.png" alt="R console" class="alignnone size-medium wp-image-30150" width="625" height="414" src-orig="http://i0.wp.com/flowingdata.com/wp-content/uploads/2013/04/R-console.png?resize=625%2C414" scale="2"></p>
<h2>Load the data</h2>
<p>In R, change your working directory via the <em>Misc &gt; Change Working Directory...</em> menu. Change the directory to where you saved the download files for this tutorial. You can also use absolute directory paths to load the data, but this is easier.</p>
<p>Now use <code>read.csv()</code> to load the data. This is the data from first slopegraph described earlier. Each row represents a country where the first column is the country name, the second is values for 1970, and the last is values for 1979. Store the data to the <code>pcdgdp</code> variable.</p>
<div id="highlighter_257977" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://flowingdata.com/2013/06/03/how-to-make-slopegraphs-in-r/#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_257977_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_257977" menu="false" src="http://flowingdata.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/clipboard.swf"></div><a href="http://flowingdata.com/2013/06/03/how-to-make-slopegraphs-in-r/#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://flowingdata.com/2013/06/03/how-to-make-slopegraphs-in-r/#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="plain">pctgdp &lt;- </code><code class="functions">read.csv</code><code class="plain">(</code><code class="string">'pct-gdp.txt'</code><code class="plain">)</code></td></tr></tbody></table></div></div></div>
<p></p>
<p>Enter "pctgdp" in the console to see what the data looks like and to make sure it was loaded correctly.</p>
<p><img src="./How to Make Slopegraphs in R_files/data-screenshot.png" alt="data-screenshot" class="alignnone size-medium wp-image-30782" width="625" height="485" src-orig="http://i1.wp.com/flowingdata.com/wp-content/uploads/2013/06/data-screenshot.png?resize=625%2C485" scale="2"></p>
<h2>Parallel coordinates plot</h2>
<p><span class="tip">Go to Packages &amp; Data &gt; Package Installer to install the lattice package if you don't have it yet.</span>In its most basic form, the slopegraph is a chart that draws lines from one side to the other. The vertical axes are sometimes the same scale and other times not, which sounds a lot like a parallel coordinates plot with two variables. </p>
<p>Maybe we can use the <code>parallelplot()</code> function from the lattice package and be done with it. Plug in <code>pctgdp</code> to the function and see what comes out.</p>
<div id="highlighter_60704" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://flowingdata.com/2013/06/03/how-to-make-slopegraphs-in-r/#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_60704_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_60704" menu="false" src="http://flowingdata.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/clipboard.swf"></div><a href="http://flowingdata.com/2013/06/03/how-to-make-slopegraphs-in-r/#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://flowingdata.com/2013/06/03/how-to-make-slopegraphs-in-r/#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="comments"># Parallel coordinates plot (not ideal)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="functions">library</code><code class="plain">(lattice)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="functions">parallelplot</code><code class="plain">(pctgdp)</code></td></tr></tbody></table></div></div></div>
<p></p>
<p>Well, you get a parallel coordinates plot that plots all three columns of the dataset (i.e. data frame in R). It's not in the right order though, and you don't want to plot country names. You just want to plot data from 1970 to 1979.</p>
<p><img src="./How to Make Slopegraphs in R_files/01-parallel-coordinates.png" alt="01-parallel coordinates" class="alignnone size-medium wp-image-30688" width="625" height="797" src-orig="http://i1.wp.com/flowingdata.com/wp-content/uploads/2013/05/01-parallel-coordinates.png?resize=625%2C797" scale="2"></p>
<p>It's straightforward to subset the data, and flip the plot so that it reads left to right instead of top to bottom using the <code>horizontal.axis</code> argument.</p>
<div id="highlighter_233221" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://flowingdata.com/2013/06/03/how-to-make-slopegraphs-in-r/#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_233221_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_233221" menu="false" src="http://flowingdata.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/clipboard.swf"></div><a href="http://flowingdata.com/2013/06/03/how-to-make-slopegraphs-in-r/#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://flowingdata.com/2013/06/03/how-to-make-slopegraphs-in-r/#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="functions">parallelplot</code><code class="plain">(pctgdp[, </code><code class="functions">c</code><code class="plain">(</code><code class="string">"pct1970"</code><code class="plain">, </code><code class="string">"pct1979"</code><code class="plain">)], horizontal.axis=</code><code class="keyword">FALSE</code><code class="plain">)</code></td></tr></tbody></table></div></div></div>
<p></p>
<p>The result is closer to what you want, but there aren't any country labels. You can do better.</p>
<p><img src="./How to Make Slopegraphs in R_files/02-parallel-coordinates-horizontal.png" alt="02-parallel coordinates horizontal" class="alignnone size-medium wp-image-30687" width="566" height="711" src-orig="http://i2.wp.com/flowingdata.com/wp-content/uploads/2013/05/02-parallel-coordinates-horizontal.png?resize=566%2C711" scale="2"></p>
<h2>Default line plot</h2>
<p>Let's go custom on this data. Draw a blank plot, and then iterate through the data, drawing a line with <code>lines()</code> for each country.</p>
<div id="highlighter_560689" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://flowingdata.com/2013/06/03/how-to-make-slopegraphs-in-r/#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_560689_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_560689" menu="false" src="http://flowingdata.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/clipboard.swf"></div><a href="http://flowingdata.com/2013/06/03/how-to-make-slopegraphs-in-r/#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://flowingdata.com/2013/06/03/how-to-make-slopegraphs-in-r/#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="comments"># Standard line chart</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="functions">plot</code><code class="plain">(0, 0, type=</code><code class="string">"n"</code><code class="plain">, main=</code><code class="string">"Receipts of Government as Percent of GDP"</code><code class="plain">, xlab=</code><code class="string">""</code><code class="plain">, ylab=</code><code class="string">""</code><code class="plain">, xlim=</code><code class="functions">c</code><code class="plain">(1970,1979), ylim=</code><code class="functions">c</code><code class="plain">(20,60))</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="functions">for </code><code class="plain">(i </code><code class="keyword">in</code> <code class="plain">1:</code><code class="functions">length</code><code class="plain">(pctgdp$country)) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp; </code><code class="plain">vals &lt;- pctgdp[i,]</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp; </code><code class="functions">lines</code><code class="plain">(</code><code class="functions">c</code><code class="plain">(1970, 1979), </code><code class="functions">c</code><code class="plain">(vals$pct1970, vals$pct1979))</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>6</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div></div></div>
<p></p>
<p>The plot looks a lot like the one you just made.</p>
<p><img src="./How to Make Slopegraphs in R_files/03-slopegraph-default.png" alt="03-slopegraph default" class="alignnone size-medium wp-image-30686" width="567" height="755" src-orig="http://i2.wp.com/flowingdata.com/wp-content/uploads/2013/05/03-slopegraph-default.png?resize=567%2C755" scale="2"></p>
<p>This is just a framework though. With the logic in place, it's easier to modify.</p>
<h2>Slopegraph cleaned up</h2>
<p><span class="tip">Remember that documentation is your friend in R. I consult it frequently. To access the documentation for a function, type a question mark followed by the function name. So if you want to know how to use <code>plot()</code>, you type <code>?plot</code>.</span>Start with the basics. Turn the labels horizontal (with <code>las</code> in <code>plot()</code>), and get rid of the border (i.e. set <code>bty</code> to "n").</p>
<div id="highlighter_447491" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://flowingdata.com/2013/06/03/how-to-make-slopegraphs-in-r/#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_447491_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_447491" menu="false" src="http://flowingdata.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/clipboard.swf"></div><a href="http://flowingdata.com/2013/06/03/how-to-make-slopegraphs-in-r/#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://flowingdata.com/2013/06/03/how-to-make-slopegraphs-in-r/#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="comments"># Clean up</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="functions">plot</code><code class="plain">(0, 0, type=</code><code class="string">"n"</code><code class="plain">, main=</code><code class="string">"Receipts of Government\n as Percent of GDP"</code><code class="plain">, xlab=</code><code class="string">""</code><code class="plain">, ylab=</code><code class="string">""</code><code class="plain">, xlim=</code><code class="functions">c</code><code class="plain">(1970,1979), ylim=</code><code class="functions">c</code><code class="plain">(20,60), bty=</code><code class="string">"n"</code><code class="plain">, las=1)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="functions">for </code><code class="plain">(i </code><code class="keyword">in</code> <code class="plain">1:</code><code class="functions">length</code><code class="plain">(pctgdp$country)) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp; </code><code class="plain">vals &lt;- pctgdp[i,]</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp; </code><code class="functions">lines</code><code class="plain">(</code><code class="functions">c</code><code class="plain">(1970, 1979), </code><code class="functions">c</code><code class="plain">(vals$pct1970, vals$pct1979))</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>6</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div></div></div>
<p></p>
<p>Now we're getting somewhere.</p>
<p><img src="./How to Make Slopegraphs in R_files/04-slopegraph-cleaner.png" alt="04-slopegraph cleaner" class="alignnone size-medium wp-image-30685" width="514" height="765" src-orig="http://i2.wp.com/flowingdata.com/wp-content/uploads/2013/05/04-slopegraph-cleaner.png?resize=514%2C765" scale="2"></p>
<p>Still no labels though. You want labels for each country that indicate the value and name of said country. Start with the values. You'll add the country names in the next step. Just recognize that the order of drawing is still the same, but now after you draw a line for a country, you also add the values for 1970 and 1979 with <code>text()</code>.</p>
<div id="highlighter_944638" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://flowingdata.com/2013/06/03/how-to-make-slopegraphs-in-r/#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_944638_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_944638" menu="false" src="http://flowingdata.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/clipboard.swf"></div><a href="http://flowingdata.com/2013/06/03/how-to-make-slopegraphs-in-r/#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://flowingdata.com/2013/06/03/how-to-make-slopegraphs-in-r/#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="comments"># Add text</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="functions">plot</code><code class="plain">(0, 0, type=</code><code class="string">"n"</code><code class="plain">, main=</code><code class="string">"Receipts of Government\n as Percent of GDP"</code><code class="plain">, xlab=</code><code class="string">""</code><code class="plain">, ylab=</code><code class="string">""</code><code class="plain">, xlim=</code><code class="functions">c</code><code class="plain">(1970,1979), ylim=</code><code class="functions">c</code><code class="plain">(20,60), bty=</code><code class="string">"n"</code><code class="plain">, las=1, axes=</code><code class="keyword">FALSE</code><code class="plain">)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="functions">for </code><code class="plain">(i </code><code class="keyword">in</code> <code class="plain">1:</code><code class="functions">length</code><code class="plain">(pctgdp$country)) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp; </code><code class="plain">vals &lt;- pctgdp[i,]</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>6</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp; </code><code class="comments"># Draw the line for current country</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>7</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp; </code><code class="functions">lines</code><code class="plain">(</code><code class="functions">c</code><code class="plain">(1970, 1979), </code><code class="functions">c</code><code class="plain">(vals$pct1970, vals$pct1979))</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>8</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>9</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp; </code><code class="comments"># Left label</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp; </code><code class="functions">text</code><code class="plain">(1970, vals$pct1970, vals$pct1970)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp; </code><code class="comments"># Right label</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp; </code><code class="functions">text</code><code class="plain">(1979, vals$pct1979, vals$pct1979)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div></div></div>
<p></p>
<p>It's messy, but the slopegraph takes shape.</p>
<p><img src="./How to Make Slopegraphs in R_files/05-slopegraph-cleaner.png" alt="05-slopegraph cleaner" class="alignnone size-medium wp-image-30684" width="480" height="691" src-orig="http://i0.wp.com/flowingdata.com/wp-content/uploads/2013/05/05-slopegraph-cleaner.png?resize=480%2C691" scale="2"></p>
<p>Next up: country names, year labels, and let's move the title to the left while we're at it. The <code>text()</code> function is called twice for each side and country for the percentage value and country name, for a total of four calls to the function on each iteration.</p>
<div id="highlighter_272999" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://flowingdata.com/2013/06/03/how-to-make-slopegraphs-in-r/#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_272999_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_272999" menu="false" src="http://flowingdata.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/clipboard.swf"></div><a href="http://flowingdata.com/2013/06/03/how-to-make-slopegraphs-in-r/#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://flowingdata.com/2013/06/03/how-to-make-slopegraphs-in-r/#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="comments"># Clean up text and add more labels</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="functions">par</code><code class="plain">(family=</code><code class="string">"serif"</code><code class="plain">)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="functions">plot</code><code class="plain">(0, 0, type=</code><code class="string">"n"</code><code class="plain">, main=</code><code class="string">""</code><code class="plain">, xlab=</code><code class="string">""</code><code class="plain">, ylab=</code><code class="string">""</code><code class="plain">, xlim=</code><code class="functions">c</code><code class="plain">(1950,1990), ylim=</code><code class="functions">c</code><code class="plain">(20,60), bty=</code><code class="string">"n"</code><code class="plain">, las=1, axes=</code><code class="keyword">FALSE</code><code class="plain">)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="functions">for </code><code class="plain">(i </code><code class="keyword">in</code> <code class="plain">1:</code><code class="functions">length</code><code class="plain">(pctgdp$country)) {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp; </code><code class="plain">vals &lt;- pctgdp[i,]</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>6</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>7</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp; </code><code class="comments"># Draw the line for current country</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>8</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp; </code><code class="functions">lines</code><code class="plain">(</code><code class="functions">c</code><code class="plain">(1970, 1979), </code><code class="functions">c</code><code class="plain">(vals$pct1970, vals$pct1979))</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>9</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp; </code><code class="comments"># Left label</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp; </code><code class="functions">text</code><code class="plain">(1970, vals$pct1970, vals$pct1970, pos=2, cex=0.8)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp; </code><code class="functions">text</code><code class="plain">(1968, vals$pct1970, vals$country, pos=2, cex=0.8)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp; </code><code class="comments"># Right label</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp; </code><code class="functions">text</code><code class="plain">(1979, vals$pct1979, vals$pct1979, pos=4, cex=0.8)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp; </code><code class="functions">text</code><code class="plain">(1981, vals$pct1979, vals$country, pos=4, cex=0.8)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>19</code></td><td class="content"><code class="comments"># Title</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>20</code></td><td class="content"><code class="functions">text</code><code class="plain">(1950, 55, </code><code class="string">"Current Receipts of Government as a\nPercentage of Gross Domestic\nProduct, 1970 and 1979"</code><code class="plain">, cex=0.9, pos=4, family=</code><code class="string">"Helvetica"</code><code class="plain">)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>21</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>22</code></td><td class="content"><code class="comments"># Year labels</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>23</code></td><td class="content"><code class="functions">text</code><code class="plain">(1970, 60, </code><code class="string">"1970"</code><code class="plain">, cex=0.9, pos=2, offset=1)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>24</code></td><td class="content"><code class="functions">text</code><code class="plain">(1979, 60, </code><code class="string">"1979"</code><code class="plain">, cex=0.9, pos=4, offset=0.5)</code></td></tr></tbody></table></div></div></div>
<p></p>
<p>The <code>text()</code> function is also called several times after the loop to add a title and year labels. Notice that up until now, you've used the default font in R, but you can change that either with <code>par()</code> or by setting the <code>family</code> argument in <code>text()</code>. The labels are serifed and the title is Helvetica. To access the fonts available on your system, enter the following. </p>
<div id="highlighter_700938" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://flowingdata.com/2013/06/03/how-to-make-slopegraphs-in-r/#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_700938_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_700938" menu="false" src="http://flowingdata.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/clipboard.swf"></div><a href="http://flowingdata.com/2013/06/03/how-to-make-slopegraphs-in-r/#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://flowingdata.com/2013/06/03/how-to-make-slopegraphs-in-r/#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="comments"># Find out available typefaces</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="functions">names</code><code class="plain">(</code><code class="functions">pdfFonts</code><code class="plain">())</code></td></tr></tbody></table></div></div></div>
<p></p>
<p>This looks pretty close, right?</p>
<p><img src="./How to Make Slopegraphs in R_files/06-slopegraph-simpler.png" alt="06-slopegraph simpler" class="alignnone size-medium wp-image-30683" width="625" height="687" src-orig="http://i2.wp.com/flowingdata.com/wp-content/uploads/2013/05/06-slopegraph-simpler.png?resize=625%2C687" scale="2"></p>
<p><span class="tip">Remember what I said about documentation?</span>So the loop to iterate for each country works perfectly fine in this case, but you actually draw everything in one fell swoop with <code>segments()</code>.</p>
<div id="highlighter_128610" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://flowingdata.com/2013/06/03/how-to-make-slopegraphs-in-r/#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_128610_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_128610" menu="false" src="http://flowingdata.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/clipboard.swf"></div><a href="http://flowingdata.com/2013/06/03/how-to-make-slopegraphs-in-r/#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://flowingdata.com/2013/06/03/how-to-make-slopegraphs-in-r/#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="comments"># Sans for loop, same output as above</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="functions">par</code><code class="plain">(family=</code><code class="string">"serif"</code><code class="plain">, mar=</code><code class="functions">c</code><code class="plain">(0,0,0,0))</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="functions">plot</code><code class="plain">(0, 0, type=</code><code class="string">"n"</code><code class="plain">, main=</code><code class="string">""</code><code class="plain">, xlab=</code><code class="string">""</code><code class="plain">, ylab=</code><code class="string">""</code><code class="plain">, xlim=</code><code class="functions">c</code><code class="plain">(1950,1990), ylim=</code><code class="functions">c</code><code class="plain">(20,60), bty=</code><code class="string">"n"</code><code class="plain">, las=1, axes=</code><code class="keyword">FALSE</code><code class="plain">)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="functions">segments</code><code class="plain">(</code><code class="functions">rep</code><code class="plain">(1970, </code><code class="functions">length</code><code class="plain">(pctgdp$country)), pctgdp$pct1970, </code><code class="functions">rep</code><code class="plain">(1979, </code><code class="functions">length</code><code class="plain">(pctgdp$country)), pctgdp$pct1979)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="functions">text</code><code class="plain">(</code><code class="functions">rep</code><code class="plain">(1970, </code><code class="functions">length</code><code class="plain">(pctgdp$country)), pctgdp$pct1970, pctgdp$pct1970, pos=2, cex=0.8)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>6</code></td><td class="content"><code class="functions">text</code><code class="plain">(</code><code class="functions">rep</code><code class="plain">(1968, </code><code class="functions">length</code><code class="plain">(pctgdp$country)), pctgdp$pct1970, pctgdp$country, pos=2, cex=0.8)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>7</code></td><td class="content"><code class="functions">text</code><code class="plain">(</code><code class="functions">rep</code><code class="plain">(1979, </code><code class="functions">length</code><code class="plain">(pctgdp$country)), pctgdp$pct1979, pctgdp$pct1979, pos=4, cex=0.8)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>8</code></td><td class="content"><code class="functions">text</code><code class="plain">(</code><code class="functions">rep</code><code class="plain">(1981, </code><code class="functions">length</code><code class="plain">(pctgdp$country)), pctgdp$pct1979, pctgdp$country, pos=4, cex=0.8)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>9</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="comments"># Title</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="functions">text</code><code class="plain">(1950, 55, </code><code class="string">"Current Receipts of Government as a\nPercentage of Gross Domestic\nProduct, 1970 and 1979"</code><code class="plain">, cex=0.9, pos=4, family=</code><code class="string">"Helvetica"</code><code class="plain">)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="comments"># Year labels</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="functions">text</code><code class="plain">(1970, 60, </code><code class="string">"1970"</code><code class="plain">, cex=0.9, pos=2, offset=1)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="functions">text</code><code class="plain">(1979, 60, </code><code class="string">"1979"</code><code class="plain">, cex=0.9, pos=4, offset=0.5)</code></td></tr></tbody></table></div></div></div>
<p></p>
<p>You get the same thing as above:</p>
<p><img src="./How to Make Slopegraphs in R_files/07-slopegraph-more-readable.png" alt="07-slopegraph more readable" class="alignnone size-medium wp-image-30682" width="613" height="898" src-orig="http://i0.wp.com/flowingdata.com/wp-content/uploads/2013/05/07-slopegraph-more-readable.png?resize=613%2C898" scale="2"></p>
<p>Like I said, there's a lot of clutter in places where percentage values are close. You can either stop here, save the resulting image, and edit in Illustrator (which is likely what Tufte or one of his assistants did), or you can take the logic in R a step further to get closer to the original.</p>
<h2>Slopegraph with spacing (advanced)</h2>
<p>To get around clutter, the lines are drawn with some vertical space in between, even if two values are the same. For example, the start point for Canada in 1970 is below Belgium even though they were both at 35.2 percent. The slope is the focal point and takes priority over vertical positioning.</p>
<p><span class="tip">This code isn't perfect yet though, because it only accounts for the <em>previous</em> point. If you really want to go at it, you should compare the current point in the iteration to all others and offset accordingly.</span>The code below takes this into account. I'll leave reading the lines as an exercise, but the gist is that you iterate through each country. At each step, you calculate the slope and intercept for each line, and if the previous point is of equal value, the line is slightly offset vertically. This provides a similar effect to the original.</p>
<div id="highlighter_122865" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://flowingdata.com/2013/06/03/how-to-make-slopegraphs-in-r/#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_122865_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_122865" menu="false" src="http://flowingdata.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/clipboard.swf"></div><a href="http://flowingdata.com/2013/06/03/how-to-make-slopegraphs-in-r/#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://flowingdata.com/2013/06/03/how-to-make-slopegraphs-in-r/#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="comments"># Fix positioning, calculate slope</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="plain">x0 &lt;- </code><code class="functions">c</code><code class="plain">()</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="plain">y0 &lt;- </code><code class="functions">c</code><code class="plain">()</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="plain">x1 &lt;- </code><code class="functions">c</code><code class="plain">()</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="plain">y1 &lt;- </code><code class="functions">c</code><code class="plain">()</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>6</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>7</code></td><td class="content"><code class="plain">startyear &lt;- 1970</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>8</code></td><td class="content"><code class="plain">stopyear &lt;- 1979</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>9</code></td><td class="content"><code class="plain">xoffset &lt;- 2</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="plain">yoffset &lt;- 0</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="plain">ystartprev &lt;- 0</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="plain">ystopprev &lt;- 0</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="plain">ythreshold &lt;- ( </code><code class="functions">max</code><code class="plain">(pctgdp$pct1970) - </code><code class="functions">min</code><code class="plain">(pctgdp$pct1970) ) * 0.025</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="functions">for </code><code class="plain">(i </code><code class="keyword">in</code> <code class="functions">length</code><code class="plain">(pctgdp$country):1) {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp; </code><code class="plain">vals &lt;- pctgdp[i,]</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp; </code><code class="plain">ystartdiff &lt;- (vals$pct1970+yoffset) - ystartprev</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp; </code><code class="functions">if </code><code class="plain">(</code><code class="functions">abs</code><code class="plain">(ystartdiff) &lt; ythreshold) {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>19</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp; &nbsp; &nbsp; </code><code class="plain">yoffset &lt;- yoffset + (ythreshold-ystartdiff)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>20</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp; </code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>21</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>22</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp; </code><code class="comments"># Calculate slope</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>23</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp; </code><code class="plain">slope &lt;- (vals$pct1979 - vals$pct1970) / (stopyear - startyear)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>24</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>25</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp; </code><code class="comments"># Intercept</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>26</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp; </code><code class="plain">intercept &lt;- vals$pct1970 + yoffset</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>27</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>28</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp; </code><code class="comments"># Start and stop coordinates for lines</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>29</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp; </code><code class="plain">ystart &lt;- intercept</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>30</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp; </code><code class="plain">ystop &lt;- slope * (stopyear-startyear) + intercept</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>31</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp; </code><code class="plain">ystopdiff &lt;- ystop - ystopprev</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>32</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp; </code><code class="functions">if </code><code class="plain">(</code><code class="functions">abs</code><code class="plain">(ystopdiff) &lt; ythreshold) {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>33</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp; &nbsp; &nbsp; </code><code class="plain">yoffset &lt;- yoffset + (ythreshold-ystopdiff)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>34</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp; &nbsp; &nbsp; </code><code class="plain">intercept &lt;- vals$pct1970 + yoffset</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>35</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp; &nbsp; &nbsp; </code><code class="plain">ystart &lt;- intercept</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>36</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp; &nbsp; &nbsp; </code><code class="plain">ystop &lt;- slope * (stopyear-startyear) + intercept</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>37</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp; </code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>38</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>39</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp; </code><code class="comments"># Draw the line for current country</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>40</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp; </code><code class="plain">x0 &lt;- </code><code class="functions">c</code><code class="plain">(x0, startyear)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>41</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp; </code><code class="plain">y0 &lt;- </code><code class="functions">c</code><code class="plain">(y0, ystart)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>42</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp; </code><code class="plain">x1 &lt;- </code><code class="functions">c</code><code class="plain">(x1, stopyear)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>43</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp; </code><code class="plain">y1 &lt;- </code><code class="functions">c</code><code class="plain">(y1, ystop)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>44</code></td><td class="content"><code class="spaces">&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>45</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp; </code><code class="plain">ystartprev &lt;- ystart</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>46</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp; </code><code class="plain">ystopprev &lt;- ystop</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>47</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>48</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>49</code></td><td class="content"><code class="plain">ymin &lt;- </code><code class="functions">min</code><code class="plain">(pctgdp$pct1970)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>50</code></td><td class="content"><code class="plain">ymax &lt;- </code><code class="functions">max</code><code class="plain">(</code><code class="functions">c</code><code class="plain">(pctgdp$pct1970, pctgdp$pct1979)) + yoffset</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>51</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>52</code></td><td class="content"><code class="functions">par</code><code class="plain">(family=</code><code class="string">"serif"</code><code class="plain">, mar=</code><code class="functions">c</code><code class="plain">(0,0,0,0))</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>53</code></td><td class="content"><code class="functions">plot</code><code class="plain">(0, 0, type=</code><code class="string">"n"</code><code class="plain">, main=</code><code class="string">""</code><code class="plain">, xlab=</code><code class="string">""</code><code class="plain">, ylab=</code><code class="string">""</code><code class="plain">, xlim=</code><code class="functions">c</code><code class="plain">(1950,1990), ylim=</code><code class="functions">c</code><code class="plain">(ymin,ymax*1.1), bty=</code><code class="string">"n"</code><code class="plain">, las=1, axes=</code><code class="keyword">FALSE</code><code class="plain">)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>54</code></td><td class="content"><code class="functions">segments</code><code class="plain">(x0, y0, x1, y1)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>55</code></td><td class="content"><code class="functions">text</code><code class="plain">(x0, y0, </code><code class="functions">rev</code><code class="plain">(pctgdp$pct1970), pos=2, cex=0.6)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>56</code></td><td class="content"><code class="functions">text</code><code class="plain">(x0-xoffset, y0, </code><code class="functions">rev</code><code class="plain">(pctgdp$country), pos=2, cex=0.6)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>57</code></td><td class="content"><code class="functions">text</code><code class="plain">(x1, y1, </code><code class="functions">rev</code><code class="plain">(pctgdp$pct1979), pos=4, cex=0.6)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>58</code></td><td class="content"><code class="functions">text</code><code class="plain">(x1+xoffset, y1, </code><code class="functions">rev</code><code class="plain">(pctgdp$country), pos=4, cex=0.6)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>59</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>60</code></td><td class="content"><code class="comments"># Title</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>61</code></td><td class="content"><code class="functions">text</code><code class="plain">(1950, ymax*1.06, </code><code class="string">"Current Receipts of\nGovernment as a Percentage\nof Gross Domestic Product,\n1970 and 1979"</code><code class="plain">, cex=0.8, pos=4)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>62</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>63</code></td><td class="content"><code class="comments"># Year labels</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>64</code></td><td class="content"><code class="functions">text</code><code class="plain">(startyear, ymax*1.1, </code><code class="string">"1970"</code><code class="plain">, cex=0.7, pos=2, offset=1)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>65</code></td><td class="content"><code class="functions">text</code><code class="plain">(stopyear, ymax*1.1, </code><code class="string">"1979"</code><code class="plain">, cex=0.7, pos=4, offset=0.5)</code></td></tr></tbody></table></div></div></div>
<p></p>
<p>I also made the font smaller, and the final is pretty darn close.</p>
<p><img src="./How to Make Slopegraphs in R_files/08-slopegraph-closer.png" alt="08-slopegraph closer" class="alignnone size-full wp-image-30681" width="589" height="908" src-orig="http://i1.wp.com/flowingdata.com/wp-content/uploads/2013/05/08-slopegraph-closer.png?resize=589%2C908" scale="2"></p>
<p>There's still a little bit of clutter on the right, but at this point I would really just bring it into Illustrator (or the <a href="http://flowingdata.com/2012/02/28/how-to-edit-r-plots-by-hand-in-inkscape/">free alternative Inkscape</a>). You're of course free to play around with the settings to get it just right.</p>
<h2>Make it a function</h2>
<p>The above is a healthy chunk of code, which isn't especially fun to use if you want to reuse this code further down the road. At the bottom of slopegraph.R in the download of this file, the code is wrapped up in a function, <code>slopegraph()</code>. So you can make the plot above with just one line of code.</p>
<div id="highlighter_125529" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://flowingdata.com/2013/06/03/how-to-make-slopegraphs-in-r/#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_125529_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_125529" menu="false" src="http://flowingdata.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/clipboard.swf"></div><a href="http://flowingdata.com/2013/06/03/how-to-make-slopegraphs-in-r/#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://flowingdata.com/2013/06/03/how-to-make-slopegraphs-in-r/#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="functions">slopegraph</code><code class="plain">(pctgdp$pct1970, pctgdp$pct1979, pctgdp$country)</code></td></tr></tbody></table></div></div></div>
<p></p>
<h2>Wrapping up</h2>
<p>On the most basic level, slopegraphs are super simple to make in R. You draw them in the same way you should a line chart. The complexity comes in fixing the details. You want to get proper spacing so that the chart is actually readable. This is especially when you have a lot of data points that are equal or near equal. When that happens, you have two choices: (1) Go with the basic line chart and fix it in your favorite illustration software; or (2) Work with the logic to draw lines with proper vertical offsets.</p>
<div class="clear-line"></div>
</div> 
</div> 
<div class="clear-line"></div>
<div id="end"></div>
 
<span id="comments"></span>
<div style="width:625px">
</div>
</div>
</div> 
</div> 
</div> 
<div id="footer">
<div id="footer-container" class="content">
<div class="float-left" style="width:32%;margin-right:5%;">
<div id="about" class="sec">
<h3>About</h3>
<p>FlowingData explores how designers, statisticians, and computer scientists are using data to understand ourselves better — mainly through data visualization.</p>
<p>As for me, I'm Nathan Yau, and I have a PhD in statistics, with a background in eating.</p>
<p><a href="http://flowingdata.com/about/">More...</a></p>
</div>
</div>
<div class="float-left" style="width:36%;margin-right:5%;">
<div id="book-single" class="sec">
<h3>Books</h3>
<ul id="books" style="margin-bottom:0">
<li>
<a href="http://flowingdata.com/data-points/"><img src="./How to Make Slopegraphs in R_files/DataPoints60x75.png" title="Data Points" class="img-left" style="margin-bottom:0" scale="0"><strong>Data Points</strong><br>Visualization that Means Something</a><br>
<div class="clear-line"></div>
</li>
<li><a href="http://flowingdata.com/visualize-this/"><img src="./How to Make Slopegraphs in R_files/flowingdata60x79.jpg" title="Visualize This" class="img-left" style="margin-bottom:0" scale="0"><strong>Visualize This</strong><br>The FlowingData Guide to Design, Visualization, and Statistics</a><br>
<div class="clear-line"></div>
</li>
</ul>
</div> 
</div>
<div class="float-left" style="width:22%">
<div id="follow" class="sec">
<h3>Follow</h3>
<p>
<a href="http://twitter.com/flowingdata">Twitter</a> &nbsp;•&nbsp;
<a href="http://facebook.com/flowingdata">Facebook</a> &nbsp;•&nbsp;
<a href="http://eepurl.com/icL0o">Email</a> &nbsp;•&nbsp;
<a href="http://flowingdata.com/feed">RSS</a>
</p>
</div>
<div id="misc" class="sec">
<h3>Miscellaneous</h3>
<a href="http://flowingdata.com/contact">Contact</a> &nbsp;•&nbsp;
<a href="http://flowingdata.com/advertise">Sponsorship</a> &nbsp;•&nbsp;
<a href="http://flowingdata.bigcartel.com/">Shop</a><a>
</a></div><a>
</a></div><a>
<div class="clear-line"></div>
</a></div><a> 
</a></div><a> 
</a><div id="bottom"><a>
Unless otherwise noted, graphics and words by me are licensed under </a><a href="http://creativecommons.org/licenses/by-nc/3.0/us/">Creative Commons BY-NC</a>. Contact original authors for everything else.
</div>
 
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script><script src="./How to Make Slopegraphs in R_files/ga.js" type="text/javascript"></script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-865100-4");
pageTracker._initData();
pageTracker._trackPageview();
</script>
<script type="text/javascript" src="./How to Make Slopegraphs in R_files/shCore.js"></script>
<script type="text/javascript" src="./How to Make Slopegraphs in R_files/shBrushR.js"></script>
<script type="text/javascript">
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://flowingdata.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/styles/shCore.css?ver=2.1.364";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://flowingdata.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/styles/shThemeDefault.css?ver=2.1.364";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.clipboardSwf = 'http://flowingdata.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/clipboard.swf';
	SyntaxHighlighter.config.strings.expandSource = 'show source';
	SyntaxHighlighter.config.strings.viewSource = 'view source';
	SyntaxHighlighter.config.strings.copyToClipboard = 'copy to clipboard';
	SyntaxHighlighter.config.strings.copyToClipboardConfirmation = 'The code is in your clipboard now';
	SyntaxHighlighter.config.strings.print = 'print';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.all();
</script>
<script type="text/javascript" src="./How to Make Slopegraphs in R_files/photon.js"></script>
<script type="text/javascript" src="./How to Make Slopegraphs in R_files/devicepx-jetpack.js"></script>
<script src="./How to Make Slopegraphs in R_files/e-201350.js" type="text/javascript"></script>
<script type="text/javascript">
	st_go({v:'ext',j:'1:2.7',blog:'1938889',post:'30678',tz:'-8'});
	var load_cmc = function(){linktracker_init(1938889,30678,2);};
	if ( typeof addLoadEvent != 'undefined' ) addLoadEvent(load_cmc);
	else load_cmc();
	</script><img id="wpstats" src="./How to Make Slopegraphs in R_files/g.gif" alt="" scale="0">
</body></html>